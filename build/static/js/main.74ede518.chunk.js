(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{16:function(e,t,a){e.exports={loginWrapper:"Login_loginWrapper__1_8fZ",buttonsWrapper:"Login_buttonsWrapper__1rNqL",button:"Login_button__2kOkb",inputTitle:"Login_inputTitle__1r9y2",inputArea:"Login_inputArea__1vBSS"}},19:function(e,t,a){e.exports={profilePageWrapper:"ProfilePage_profilePageWrapper__onBvr",profilePageTitle:"ProfilePage_profilePageTitle__3gFyx",profilePageUserNameTitle:"ProfilePage_profilePageUserNameTitle__170cN",profilePageForm:"ProfilePage_profilePageForm__11FPy",profilePageInput:"ProfilePage_profilePageInput__2kq26",profilePageButton:"ProfilePage_profilePageButton__1qNPr",uploadTitle:"ProfilePage_uploadTitle__3ddrC",uploadImageButton:"ProfilePage_uploadImageButton__2AusS"}},28:function(e,t,a){e.exports={tweetFormGroup:"CreateTweet_tweetFormGroup__3c_hV",tweetForm:"CreateTweet_tweetForm__NLXXq",tweetFormInput:"CreateTweet_tweetFormInput__3vgQd",tweetFormAlert:"CreateTweet_tweetFormAlert__NzICj",tweetFormButton:"CreateTweet_tweetFormButton__1QyfL"}},31:function(e,t,a){e.exports={tweetsListWrapper:"ListOfTweets_tweetsListWrapper__Wgdwl",toastHeader:"ListOfTweets_toastHeader__xnl04",toastBody:"ListOfTweets_toastBody__Psc3m",tweetName:"ListOfTweets_tweetName__15Jae"}},39:function(e,t,a){},41:function(e,t,a){e.exports={navBarWrapper:"NavBar_navBarWrapper__2Syas",navBar:"NavBar_navBar__3TH9t"}},64:function(e,t,a){e.exports=a(93)},69:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),l=a.n(o),c=(a(69),a(60)),u=a(51),i=a(52),s=a(61),m=a(59),p=a(27),f=a.n(p),d=a(36),g=a(9),v=a(95),h=a(96),E=a(97),w=a(98),b=a(99),_=a(106),N=(a(39),a(28)),y=a.n(N),O=r.a.createContext({user:{},userName:"",tweets:[],currentUserName:function(e){},handleOnTweetSubmit:function(e){}});var P=function(e){var t=e.showLoading;return r.a.createElement("div",{className:"loader center"},r.a.createElement("i",{className:"fa fa-cog fa-spin",style:{color:"lightblue",display:t?"block":"none"}}))},S=a(24),j=a.n(S);j.a.initializeApp({apiKey:"AIzaSyD1McotxXef3wsarLT5vmJ7RmwDikcrTGg",authDomain:"react-twitter-app-davidbador.firebaseapp.com",databaseURL:"https://react-twitter-app-davidbador.firebaseio.com",projectId:"react-twitter-app-davidbador",storageBucket:"react-twitter-app-davidbador.appspot.com",messagingSenderId:"242298983492",appId:"1:242298983492:web:c0b2f7b1e95c0f5d34d811",measurementId:"G-W24TZJCTDV"});var T=j.a.auth(),C=j.a.storage(),k=new j.a.auth.GoogleAuthProvider;var B=j.a.firestore();function x(e,t,a){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(f.a.mark((function e(t,a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.collection("tweets").add(t);case 2:return r=e.sent,e.prev=3,a(),e.abrupt("return",setTimeout((function(){return r}),2e3));case 8:return e.prev=8,e.t0=e.catch(3),e.abrupt("return",n(e.t0));case 11:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}var W=function(){var e=Object(n.useState)(""),t=Object(g.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!1),c=Object(g.a)(l,2),u=c[0],i=c[1],s=Object(n.useState)(!1),m=Object(g.a)(s,2),p=m[0],N=m[1],S=Object(n.useState)(!1),j=Object(g.a)(S,2),T=j[0],C=j[1],k=Object(n.useState)(!1),B=Object(g.a)(k,2),L=B[0],W=B[1],F=Object(n.useState)(""),I=Object(g.a)(F,2),A=I[0],U=I[1],D=Object(n.useContext)(O),R=function(){W(!1)},H=function(){setTimeout((function(){return C(!1)}),1e3)},G=function(e){!function(e){W(!0),U(e)}(e)},J=function(){var e=Object(d.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,x({uid:D.user.uid,content:a,date:(new Date).toISOString()},H,G);case 3:r=e.sent,C(!0),o(""),setTimeout((function(){return n(r)}),1e3);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(O.Consumer,null,(function(e){return r.a.createElement("div",null,r.a.createElement(v.a,{onSubmit:function(t){return J(t,e.handleOnTweetSubmit)}},r.a.createElement(h.a,{className:y.a.tweetFormGroup},r.a.createElement("div",{className:y.a.tweetForm},r.a.createElement(E.a,{type:"textarea",name:"text",id:"tweetTextArea",value:a,className:y.a.tweetFormInput,placeholder:"What do you have in mind...",onChange:function(e){e.target.value.length<=140?(o(e.target.value),i(!1),N(!1)):(o(e.target.value),i(!0),N(!0))}}),r.a.createElement(_.a,{show:L,onHide:R,animation:!1},r.a.createElement(_.a.Header,{closeButton:!0},r.a.createElement(_.a.Title,null,"ERROR!")),r.a.createElement(_.a.Body,null,A),r.a.createElement(_.a.Footer,null,r.a.createElement(w.a,{variant:"primary",onClick:R},"Close"))),r.a.createElement(b.a,{color:"danger",className:y.a.tweetFormAlert,style:{display:p?"block":"none"}},"The tweet can't contain more than 140 chars."),r.a.createElement(w.a,{type:"submit",color:"primary",disabled:u,className:y.a.tweetFormButton},"Tweet")))),r.a.createElement(P,{showLoading:T}))}))},F=a(100),I=a(101),A=a(102),U=a(31),D=a.n(U),R=function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),o=a[0],l=a[1],c=e.tweet;return Object(n.useEffect)((function(){void 0!==c.uid&&j.a.firestore().collection("users").doc(c.uid).get().then((function(e){l(e.data().userName)}))}),[c.uid]),r.a.createElement("div",null,r.a.createElement("div",{className:D.a.tweetsListWrapper},r.a.createElement("div",{className:"p-3 my-2 rounded bg-dark",style:{width:"50%"}},r.a.createElement(F.a,null,r.a.createElement(I.a,{className:D.a.toastHeader},r.a.createElement("span",{className:D.a.tweetName},o),r.a.createElement("span",null,c.date)),r.a.createElement(A.a,{className:D.a.toastBody},c.content)))))},H=function(){return r.a.createElement(O.Consumer,null,(function(e){return r.a.createElement("div",null,e.tweets.sort((function(e,t){return t.date>e.date?1:-1})).map((function(e){return r.a.createElement(R,{key:e.uid,tweet:e})})))}))},G=function(){return r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(H,null))},J=a(19),q=a.n(J),M=function(){var e=Object(n.useState)(!1),t=Object(g.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(""),c=Object(g.a)(l,2),u=c[0],i=c[1],s=Object(n.useState)(""),m=Object(g.a)(s,2),p=m[0],f=m[1],d=Object(n.useState)(""),b=Object(g.a)(d,2),N=b[0],y=b[1];Object(n.useEffect)((function(){L()}));var P=Object(n.useContext)(O),S=function(e){if(e.target.files[0]){var t=e.target.files[0];f((function(){return t}))}},T=function(e){e.preventDefault(),C.ref("images/".concat(P.user.uid)).put(p).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e)}),(function(){C.ref("images").child(P.user.uid).getDownloadURL().then((function(e){y(e),B()}))}))},k=function(){o(!1)},B=function(){j.a.firestore().collection("users").doc(P.user.uid).update({photo:N})},x=function(e,t){e.preventDefault(),u.length>0?(i(e.target.value),j.a.firestore().collection("users").doc(P.user.uid).update({userName:u}),t(u)):o(!0)},L=function(){j.a.firestore().collection("users").doc(P.user.uid).get().then((function(e){y(e.data().photo)}))};return r.a.createElement(O.Consumer,null,(function(e){return r.a.createElement("div",{className:q.a.profilePageWrapper},r.a.createElement(v.a,{className:q.a.profilePageForm,onSubmit:function(t){return x(t,e.currentUserName)}},r.a.createElement(h.a,null,r.a.createElement("div",{className:q.a.profilePageTitle},"Profile"),r.a.createElement(_.a,{show:a,onHide:k,animation:!1},r.a.createElement(_.a.Header,{closeButton:!0},r.a.createElement(_.a.Title,null,"ERROR!")),r.a.createElement(_.a.Body,null,"Please enter a User Name!"),r.a.createElement(_.a.Footer,null,r.a.createElement(w.a,{variant:"primary",onClick:k},"Close"))),r.a.createElement("div",{className:q.a.profilePageUserNameTitle},"User Name"),r.a.createElement(E.a,{value:u,type:"text",className:q.a.profilePageInput,onChange:function(e){return i(e.target.value)}}),r.a.createElement(w.a,{type:"submit",className:q.a.profilePageButton,color:"primary"},"Save"))),r.a.createElement(v.a,{onSubmit:T},r.a.createElement(h.a,null,r.a.createElement("div",{className:q.a.uploadTitle},"Upload Profile Picture"),r.a.createElement(E.a,{type:"file",onChange:S}),r.a.createElement(w.a,{className:q.a.uploadImageButton,color:"primary"},"Upload"))),r.a.createElement("img",{src:N,alt:"profile",style:{width:"300px",height:"400px"}}))}))},z=a(103),X=a(104),Q=a(105),V=a(30),Z=a(41),K=a.n(Z);var $=function(){return r.a.createElement("div",{className:K.a.navBarWrapper},r.a.createElement(z.a,{color:"dark",dark:!0,expand:"md",className:K.a.navBar},r.a.createElement(X.a,null,r.a.createElement(Q.a,null,r.a.createElement(V.b,{exact:!0,activeClassName:"active",to:"/"},"Home")),r.a.createElement(Q.a,null,r.a.createElement(V.b,{exact:!0,activeClassName:"active",to:"/profile"},"Profile")))))},Y=a(16),ee=a.n(Y),te=function(){var e=Object(n.useState)(""),t=Object(g.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(""),c=Object(g.a)(l,2),u=c[0],i=c[1];return r.a.createElement(v.a,{className:ee.a.loginWrapper},r.a.createElement(h.a,null,r.a.createElement("div",{className:ee.a.inputTitle},"Email"),r.a.createElement(E.a,{className:ee.a.inputArea,type:"email",value:a,onChange:function(e){return o(e.target.value)}})),r.a.createElement(h.a,null,r.a.createElement("div",{className:ee.a.inputTitle},"Password"),r.a.createElement(E.a,{className:ee.a.inputArea,type:"password",value:u,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:ee.a.buttonsWrapper},r.a.createElement(w.a,{className:ee.a.button,type:"submit",color:"primary",onClick:function(e){e.preventDefault(),j.a.auth().signInWithEmailAndPassword(a,u)}},"Login"),r.a.createElement(w.a,{className:ee.a.button,color:"primary",onClick:function(e){e.preventDefault(),j.a.auth().createUserWithEmailAndPassword(a,u).then((function(e){return j.a.firestore().collection("users").doc(e.user.uid).set({uid:e.user.uid,userName:"Anonymous",email:a,photo:""})}))}},"Signup"),r.a.createElement(w.a,{className:ee.a.button,color:"primary",onClick:function(e){e.preventDefault(),T.signInWithPopup(k).then((function(e){return j.a.firestore().collection("users").doc(e.user.uid).set({uid:e.user.uid,userName:e.user.displayName,email:e.user.email,photo:e.user.photoURL})}))}},"Log in with Google")))},ae=a(21),ne=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).unsubscribe=null,n.componentDidMount=function(){n.authListener(),j.a.auth().onAuthStateChanged((function(e){n.setState({user:e})})),n.loadTweets()},n.loadTweets=function(){return j.a.firestore().collection("tweets").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));n.setState({tweets:t})}))},n.state={user:{},userName:"",tweets:[]},n}return Object(i.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=localStorage.getItem("savedName"),a=JSON.parse(t);t?this.setState((function(){return{userName:a}})):this.setState((function(){return{userName:e.state.userName}}))}},{key:"componentDidUpdate",value:function(){localStorage.setItem("savedName",JSON.stringify(this.state.userName))}},{key:"authListener",value:function(){var e=this;j.a.auth().onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:null})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(V.a,null,this.state.user&&Object.keys(this.state.user).length>0&&r.a.createElement($,null),r.a.createElement(ae.c,null,r.a.createElement(O.Provider,{value:{userName:this.state.userName||this.state.user.displayName,tweets:this.state.tweets,handleOnTweetSubmit:function(t){e.setState({tweets:[t].concat(Object(c.a)(e.state.tweets))}),e.loadTweets()},currentUserName:function(t){e.setState({userName:t})},user:this.state.user}},r.a.createElement(ae.a,{path:"/",exact:!0},this.state.user&&Object.keys(this.state.user).length>0?r.a.createElement(G,null):r.a.createElement(te,null)),r.a.createElement(ae.a,{path:"/profile",exact:!0},this.state.user&&Object.keys(this.state.user).length>0?r.a.createElement(M,null):r.a.createElement(te,null))))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.74ede518.chunk.js.map