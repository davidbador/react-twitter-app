(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{29:function(e,t,a){e.exports={profilePageWrapper:"ProfilePage_profilePageWrapper__onBvr",profilePageTitle:"ProfilePage_profilePageTitle__3gFyx",profilePageUserNameTitle:"ProfilePage_profilePageUserNameTitle__170cN",profilePageForm:"ProfilePage_profilePageForm__11FPy",profilePageInput:"ProfilePage_profilePageInput__2kq26",profilePageButton:"ProfilePage_profilePageButton__1qNPr"}},32:function(e,t,a){e.exports={tweetFormGroup:"CreateTweet_tweetFormGroup__3c_hV",tweetForm:"CreateTweet_tweetForm__NLXXq",tweetFormInput:"CreateTweet_tweetFormInput__3vgQd",tweetFormAlert:"CreateTweet_tweetFormAlert__NzICj",tweetFormButton:"CreateTweet_tweetFormButton__1QyfL"}},34:function(e,t,a){e.exports={tweetsListWrapper:"ListOfTweets_tweetsListWrapper__Wgdwl",toastHeader:"ListOfTweets_toastHeader__xnl04",toastBody:"ListOfTweets_toastBody__Psc3m",tweetName:"ListOfTweets_tweetName__15Jae"}},40:function(e,t,a){},42:function(e,t,a){e.exports={navBarWrapper:"NavBar_navBarWrapper__2Syas",navBar:"NavBar_navBar__3TH9t"}},61:function(e,t,a){e.exports=a(90)},66:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),l=a.n(o),s=(a(66),a(58)),i=a(21),u=a.n(i),c=a(30),d=a(13),m=a(14),h=a(16),p=a(15),f=a(8),g=a(92),v=a(93),w=a(94),b=a(95),E=a(96),N=a(103),y=(a(40),a(32)),O=a.n(y),S=r.a.createContext({user:{},userName:"",tweets:[],currentUserName:function(e){},handleOnTweetSubmit:function(e){}});var P=function(e){var t=e.showLoading;return r.a.createElement("div",{className:"loader center"},r.a.createElement("i",{className:"fa fa-cog fa-spin",style:{color:"lightblue",display:t?"block":"none"}}))},C=a(27),_=a.n(C);_.a.initializeApp({apiKey:"AIzaSyD1McotxXef3wsarLT5vmJ7RmwDikcrTGg",authDomain:"react-twitter-app-davidbador.firebaseapp.com",databaseURL:"https://react-twitter-app-davidbador.firebaseio.com",projectId:"react-twitter-app-davidbador",storageBucket:"react-twitter-app-davidbador.appspot.com",messagingSenderId:"242298983492",appId:"1:242298983492:web:c0b2f7b1e95c0f5d34d811",measurementId:"G-W24TZJCTDV"});var j=_.a.auth(),T=_.a.storage(),x=new _.a.auth.GoogleAuthProvider;var k=_.a.firestore();function L(e,t,a){return M.apply(this,arguments)}function M(){return(M=Object(c.a)(u.a.mark((function e(t,a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("tweets").add(t);case 2:return r=e.sent,e.prev=3,a(),e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(3),e.abrupt("return",n(e.t0));case 11:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}var F=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).updateText=function(e){e.target.value.length<=140?n.setState({buttonDisabled:!1,showAlert:!1}):n.setState({buttonDisabled:!0,showAlert:!0}),n.setState({value:e.target.value})},n.handleModalShow=function(e){n.setState({showModal:!0,modalText:e})},n.handleModalClose=function(){n.setState({showModal:!1})},n.turnOffLoader=function(){setTimeout((function(){return n.setState({showLoading:!1})}),1e3)},n.displayError=function(e){n.handleModalShow(e)},n.componentWillMount=function(){n.getName()},n.getName=function(){_.a.firestore().collection("users").doc(n.context.user.uid).get().then((function(e){n.setState({name:e.data().userName})}))},n.handleOnSubmit=function(){var e=Object(c.a)(u.a.mark((function e(t,a){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.state.value,e.next=4,L({userName:n.state.name,content:r,date:(new Date).toISOString()},n.turnOffLoader,n.displayError);case 4:o=e.sent,n.setState({showLoading:!0,value:""}),setTimeout((function(){return a(o)}),1e3);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={value:"",showAlert:!1,buttonDisabled:!1,showLoading:!1,showModal:!1,modalText:"",name:"",showHome:!1},n.button=r.a.createRef(),n.updateText=n.updateText.bind(Object(f.a)(n)),n.handleModalShow=n.handleModalShow.bind(Object(f.a)(n)),n.handleModalClose=n.handleModalClose.bind(Object(f.a)(n)),n.turnOffLoader=n.turnOffLoader.bind(Object(f.a)(n)),n.displayError=n.displayError.bind(Object(f.a)(n)),n.getName=n.getName.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(S.Consumer,null,(function(t){return r.a.createElement("div",null,r.a.createElement(g.a,{onSubmit:function(a){return e.handleOnSubmit(a,t.handleOnTweetSubmit)}},r.a.createElement(v.a,{className:O.a.tweetFormGroup},r.a.createElement("div",{className:O.a.tweetForm},r.a.createElement(w.a,{type:"textarea",name:"text",id:"tweetTextArea",value:e.state.value,className:O.a.tweetFormInput,placeholder:"What do you have in mind...",onChange:e.updateText}),r.a.createElement(N.a,{show:e.state.showModal,onHide:e.handleModalClose,animation:!1},r.a.createElement(N.a.Header,{closeButton:!0},r.a.createElement(N.a.Title,null,"ERROR!")),r.a.createElement(N.a.Body,null,e.state.modalText),r.a.createElement(N.a.Footer,null,r.a.createElement(b.a,{variant:"primary",onClick:e.handleModalClose},"Close"))),r.a.createElement(E.a,{color:"danger",className:O.a.tweetFormAlert,style:{display:e.state.showAlert?"block":"none"}},"The tweet can't contain more than 140 chars."),r.a.createElement(b.a,{type:"submit",color:"primary",disabled:e.state.buttonDisabled,className:O.a.tweetFormButton},"Tweet")))),r.a.createElement(P,{showLoading:e.state.showLoading}))}))}}]),a}(r.a.Component);F.contextType=S;var U=F,B=a(97),I=a(98),W=a(99),D=a(34),A=a.n(D),G=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(S.Consumer,null,(function(e){return r.a.createElement("div",null,e.tweets.sort((function(e,t){return t.date>e.date?1:-1})).map((function(e){return r.a.createElement("div",{className:A.a.tweetsListWrapper},r.a.createElement("div",{className:"p-3 my-2 rounded bg-dark",style:{width:"50%"}},r.a.createElement(B.a,null,r.a.createElement(I.a,{className:A.a.toastHeader},r.a.createElement("span",{className:A.a.tweetName},e.userName),r.a.createElement("span",null,e.date)),r.a.createElement(W.a,{className:A.a.toastBody},e.content))))})))}))}}]),a}(r.a.Component);G.contextType=S;var R=G,H=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement(R,null))}}]),a}(r.a.Component),J=a(29),q=a.n(J),z=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleModalShow=function(){n.setState({showModal:!0})},n.handleFileChange=function(e){if(e.target.files[0]){var t=e.target.files[0];n.setState((function(){return{image:t}}))}},n.handleUpload=function(e){e.preventDefault();var t=n.state.image;T.ref("images/".concat(t.name)).put(t).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e)}),(function(){T.ref("images").child(t.name).getDownloadURL().then((function(e){n.setState({url:e}),n.updateProfilePicture()}))}))},n.componentWillMount=function(){n.getPicture(),console.log(n.state.url)},n.handleModalClose=function(){n.setState({showModal:!1})},n.updateUserName=function(e){n.setState({value:e.target.value})},n.updateFireName=function(){_.a.firestore().collection("users").doc(n.context.user.uid).update({userName:n.state.value})},n.updateProfilePicture=function(){_.a.firestore().collection("users").doc(n.context.user.uid).update({photo:n.state.url})},n.submitUserName=function(e,t){e.preventDefault(),n.state.value.length>0?(n.setState({value:e.target.value}),n.updateFireName(),t(n.state.value)):n.handleModalShow()},n.getPicture=function(){_.a.firestore().collection("users").doc(n.context.user.uid).get().then((function(e){console.log(e.data().photo),n.setState({url:e.data().photo})}))},n.state={showModal:!1,value:"",image:"",url:""},n.updateUserName=n.updateUserName.bind(Object(f.a)(n)),n.handleModalShow=n.handleModalShow.bind(Object(f.a)(n)),n.handleModalClose=n.handleModalClose.bind(Object(f.a)(n)),n.updateFireName=n.updateFireName.bind(Object(f.a)(n)),n.handleFileChange=n.handleFileChange.bind(Object(f.a)(n)),n.handleUpload=n.handleUpload.bind(Object(f.a)(n)),n.updateProfilePicture=n.updateProfilePicture.bind(Object(f.a)(n)),n.getPicture=n.getPicture.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(S.Consumer,null,(function(t){return r.a.createElement("div",{className:q.a.profilePageWrapper},r.a.createElement(g.a,{className:q.a.profilePageForm,onSubmit:function(a){return e.submitUserName(a,t.currentUserName)}},r.a.createElement(v.a,null,r.a.createElement("div",{className:q.a.profilePageTitle},"Profile"),r.a.createElement(N.a,{show:e.state.showModal,onHide:e.handleModalClose,animation:!1},r.a.createElement(N.a.Header,{closeButton:!0},r.a.createElement(N.a.Title,null,"ERROR!")),r.a.createElement(N.a.Body,null,"Please enter a User Name!"),r.a.createElement(N.a.Footer,null,r.a.createElement(b.a,{variant:"primary",onClick:e.handleModalClose},"Close"))),r.a.createElement("div",{className:q.a.profilePageUserNameTitle},"User Name"),r.a.createElement(w.a,{value:e.state.value,type:"text",className:q.a.profilePageInput,onChange:e.updateUserName}),r.a.createElement(b.a,{type:"submit",className:q.a.profilePageButton,color:"primary"},"Save"))),r.a.createElement(g.a,{onSubmit:e.handleUpload},r.a.createElement(v.a,null,r.a.createElement("div",null,"Upload Profile Picture"),r.a.createElement(w.a,{type:"file",onChange:e.handleFileChange}),r.a.createElement(b.a,{color:"primary"},"Upload"))),r.a.createElement("img",{src:e.state.url,alt:"profile",style:{width:"300px",height:"400px"}}))}))}}]),a}(r.a.Component);z.contextType=S;var X=z,Q=a(100),V=a(101),K=a(102),Z=a(33),$=a(42),Y=a.n($);var ee=function(){return r.a.createElement("div",{className:Y.a.navBarWrapper},r.a.createElement(Q.a,{color:"dark",dark:!0,expand:"md",className:Y.a.navBar},r.a.createElement(V.a,null,r.a.createElement(K.a,null,r.a.createElement(Z.b,{exact:!0,activeClassName:"active",to:"/"},"Home")),r.a.createElement(K.a,null,r.a.createElement(Z.b,{exact:!0,activeClassName:"active",to:"/profile"},"Profile")))))},te=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={email:"",password:""},n.handleEmailChange=n.handleEmailChange.bind(Object(f.a)(n)),n.handlePasswordChange=n.handlePasswordChange.bind(Object(f.a)(n)),n.handleGoogleLogIn=n.handleGoogleLogIn.bind(Object(f.a)(n)),n.handleLogin=n.handleLogin.bind(Object(f.a)(n)),n.handleSignup=n.handleSignup.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"handleLogin",value:function(e){e.preventDefault(),_.a.auth().signInWithEmailAndPassword(this.state.email,this.state.password)}},{key:"handleSignup",value:function(e){var t=this;e.preventDefault(),_.a.auth().createUserWithEmailAndPassword(this.state.email,this.state.password).then((function(e){return _.a.firestore().collection("users").doc(e.user.uid).set({uid:e.user.uid,userName:"Anonymous",email:t.state.email,photo:""})}))}},{key:"handleGoogleLogIn",value:function(e){e.preventDefault(),j.signInWithPopup(x).then((function(e){return _.a.firestore().collection("users").doc(e.user.uid).set({uid:e.user.uid,userName:e.user.displayName,email:e.user.email,photo:e.user.photoURL})}))}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleUserNameChange",value:function(e){this.setState({userName:e.target.value})}},{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement(v.a,null,r.a.createElement("div",null,"Email"),r.a.createElement(w.a,{type:"email",value:this.state.email,onChange:this.handleEmailChange})),r.a.createElement(v.a,null,r.a.createElement("div",null,"Password"),r.a.createElement(w.a,{type:"password",value:this.state.password,onChange:this.handlePasswordChange})),r.a.createElement(b.a,{type:"submit",color:"primary",onClick:this.handleLogin},"Login"),r.a.createElement(b.a,{color:"primary",onClick:this.handleSignup},"Signup"),r.a.createElement(b.a,{color:"primary",onClick:this.handleGoogleLogIn},"Log in with Google"))}}]),a}(n.Component);te.contextType=S;var ae=te,ne=a(24),re=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).unsubscribe=null,n.componentDidMount=function(){n.authListener(),_.a.auth().onAuthStateChanged((function(e){n.setState({user:e})})),n.loadTweets()},n.loadTweets=Object(c.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.unsubscribe=_.a.firestore().collection("tweets").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));n.setState({tweets:t})}));case 1:case"end":return e.stop()}}),e)}))),n.state={user:{},userName:"",tweets:[]},n}return Object(m.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=localStorage.getItem("savedName"),a=JSON.parse(t);t?this.setState((function(){return{userName:a}})):this.setState((function(){return{userName:e.state.userName}}))}},{key:"componentDidUpdate",value:function(){localStorage.setItem("savedName",JSON.stringify(this.state.userName))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"authListener",value:function(){var e=this;_.a.auth().onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:null})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(Z.a,null,this.state.user&&Object.keys(this.state.user).length>0&&r.a.createElement(ee,null),r.a.createElement(ne.c,null,r.a.createElement(S.Provider,{value:{userName:this.state.userName||this.state.user.displayName,tweets:this.state.tweets,handleOnTweetSubmit:function(t){e.setState({tweets:[t].concat(Object(s.a)(e.state.tweets))}),e.loadTweets()},currentUserName:function(t){e.setState({userName:t})},user:this.state.user}},r.a.createElement(ne.a,{path:"/",exact:!0},this.state.user&&Object.keys(this.state.user).length>0?r.a.createElement(H,null):r.a.createElement(ae,null)),r.a.createElement(ne.a,{path:"/profile",exact:!0},this.state.user&&Object.keys(this.state.user).length>0?r.a.createElement(X,null):r.a.createElement(ae,null))))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.8e5ec15a.chunk.js.map